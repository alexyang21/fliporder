<%= form_for @order, :html => { id: "order-form" } do |f| %>

  <% if @order.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@order.errors.count, "error") %> prohibited this order from being saved:</h2>
      <ul>
      <% @order.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div id="stripe_error">
    <noscript>
      JavaScript is not enabled and is required for this form. First enable it in your web browser settings.
    </noscript>
  </div>

  <legend>Your Contact Info</legend>

  <div class="form-group">
    <div class="row">
      <div class="col-lg-9">
        <%= f.label :name %>
        <%= f.text_field :name, class: "form-control",
            placeholder: "#{current_user.name}" %>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-9">
        <%= f.label :email %>
        <%= f.email_field :email, class: "form-control",
            placeholder: "#{current_user.email}" %>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-9">
        <%= f.label :phone %>
        <%= f.text_field :phone, class: "form-control" %>
      </div>
    </div>
  </div>

  <legend>Delivery Address</legend>

  <div class="form-group">
    <div class="row">
      <div class="col-lg-9">
        <%= f.label :address %>
        <%= f.text_field :address, class: "form-control" %>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <%= f.label :city %>
        <%= f.text_field :city, class: "form-control" %>
      </div>
      <div class="col-lg-3">
        <%= f.label :state %>
        <%= f.text_field :state, class: "form-control" %>
      </div>
    </div>
  </div>

  <legend>Payment Details</legend>

  <div class="form-group">
    <div class="row">
      <div class="col-lg-6">
        <%= label_tag :card_number, "Credit Card Number" %>
        <%= text_field_tag :card_number, nil,
            { :name => nil, :'data-stripe' => "number",
              class: "form-control card_number" } %>
      </div>
      <div class="col-lg-3">
        <%= label_tag :card_code, "CVC" %>
        <%= text_field_tag :card_code, nil,
            { :name => nil, :'data-stripe' => "cvc",
              class: "form-control" } %>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-6">
        <%= label_tag :card_month, "Expiration (MM/YYYY)" %>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-3">
        <%= select_month nil,
            {use_two_digit_numbers: true},
            { :name => nil, :id => "card_month",
              :'data-stripe' => "exp-month",
              :class => "form-control" } %>
      </div>
      <div class="col-lg-3">
        <%= select_year nil,
            {start_year: Date.today.year,
            end_year: Date.today.year+15},
            { :name => nil, :id => "card_year",
              :'data-stripe' => "exp-year",
              :class => "form-control" } %>
      </div>
    </div>
  </div>

  <div class="actions">
    <%= f.submit "Complete Order",
        class: "btn btn-success btn-lg" %>
  </div>
<% end %>

